<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LoCal Cluster | LoCal</title>
    <link rel="stylesheet" href="css/foundation.css" />
    <link rel="shortcut icon" href="http://sdb.cs.berkeley.edu/sdb/sites/all/themes/corporateclean/favicon.ico" type="image/vnd.microsoft.icon" />
    <script src="js/vendor/modernizr.js"></script>
  </head>

  <body>

<!-- Top-Panel -->
  <div class="top-panel">
    <!-- change the color of the background to black instead of the default white 
         if use the same color as the navigation bar, how to make a line between them-> set the border-bottom-style to be solid, and the change the width and color of the border. -->
    <div style="background-color:#dcdcdc; color:#000000; text-align:center; padding-top:2rem; padding-bottom:2rem;">
      <!-- SDB image, click and goes to home(sdb) -->
      <a href="index.html"> 
        <img src="files/local_logo.png" height="123" width="216">  </a>
      <!-- <img src="http://sdb.cs.berkeley.edu/sdb/sites/default/files/logo%20vector_2.png" height="123" width="216"> -->
      <div class="top-panel-text" align="center">
        LoCal - A Network Architecture for Localized Electrical Energy Reduction, Generation and Sharing
      </div>
    </div>
  </div>
<!-- End of Top-Panel -->

<!--Navigation Bar -->
  <div class="contain-to-grid sticky" data-options="sticky_on: large">
   <nav class="top-bar" data-topbar>
    <ul class="title-area">

      <!-- Title Area -->
      <li class="name">
        <h1>
          <a href="index.html">Home</a>
        </h1>
      </li>
    </ul>
 
    <section class="top-bar-section">
      <!-- Left Nav Section -->
      <ul class="left">
        <li class="divider"></li>
        <li class="has-dropdown">
          <a href="projects.html">Projects</a>
          <ul class="dropdown">    
            <li><a href="local_cluster.html">LoCal Cluster</a></li>
            <li><a href="#">LoCal Control (IPS)</a></li>
            <li><a href="data_schema.html">Data Schema/Service Discovery</a></li>
            <li><a href="https://code.google.com/p/smap-data/">sMAP 2.0 Project</a></li>
            <li><a href="cory_hall_monitoring.html">Cory Hall Monitoring</a></li>
            <li><a href="#">LBNL B90 Monitoring</a></li>
            <li><a href="branch_level_monitoring.html">Branch level Monitoring</a></li>
            <li><a href="green_ganglia.html">Green Ganglia</a></li>
            <li><a href="#">Slack Analysis</a></li>
            <li><a href="#">Flywheel Storage</a></li>
            <li><a href="#">Penetration of Renewables</a></li>
            <li><a href="energy_visualization.html">Energy Visualization Mobile Application</a></li>
            <li><a href="google_driver.html">Google PowerMeter ACmeX2 Driver</a></li>
            <li><a href="http://is4server.com/">StreamFS</a></li>
            <li><a href="undergrad_research.html">Undergrad Research Activities</a></li>
          </ul>
        </li>
        <li class="divider"></li>  
        <li><a href="events.html">Events</a></li>
        <li class="divider"></li>
        <li><a href="resources.html">Resources</a></li>
        <li class="divider"></li>
        <li><a href="people.html">People</a></li>
        <li class="divider"></li>
        <li><a href="publications.html">Publications</a></li>

        <li class="divider"></li>
        <li class="has-dropdown">
          <a href="#">Quick Links</a>
          <ul class="dropdown">
            <li><a href="http://local.cs.berkeley.edu/wiki2/index.php/Main_Page/">LoCal Wiki</a></li>
            <li><a href="http://sdb.cs.berkeley.edu/">SDB</a></li>
            <li><a href="http://new.openbms.org/plot/">sMAP</a></li>
            <li><a href="http://www.cs.berkeley.edu/">Computer Science</a></li>
            <li><a href="http://www.berkeley.edu/">UC Berkeley</a></li>
          </ul>
        </li>

        <li class="divider"></li>
        <li class="has-dropdown">
          <a href="#">Partners</a>
          <ul class="dropdown">
            <li><a href="http://aws.amazon.com/">Amazon Web Services</a></li>
            <li><a href="http://www.energy.ca.gov/">California Energy Commission</a></li>
            <li><a href="https://www.src.org/program/fcrp/">Focus Center Research Program</a></li>
            <li><a href="http://www.fujitsu.com/">Fujitsu</a></li>
            <li><a href="http://www.intel.com/content/www/us/en/homepage.html">Intel</a></li>
            <li><a href="http://www.keti.re.kr/e-keti/">KETI</a></li>
            <li><a href="http://www.lbl.gov/">Lawrence Berkeley National Laboratory</a></li>
            <li><a href="http://www.musyc.org/">The Multiscale Systems Center</a></li>
            <li><a href="http://www.nsf.gov/">National Science Foundation</a></li>
            <li><a href="http://www.nokia.com/">Nokia</a></li>
            <li><a href="http://www.samsung.com/us/">Samsung</a></li>
            <li><a href="http://www.siemens.com/entry/cc/en/">Siemens</a></li>
            <li><a href="http://www.energy.gov/">Energy.Gov</a></li>
          </ul>
        </li>
      </section>
      <!-- Right Nav Section -->
      <section class="top-bar-section">
        <ul class="right">
          <li class="divider"></li>
          <li><a href="search.html">Search</a></li>
          <li class="divider"></li>
        </ul>
      </section>
    </nav>
  </div>
  <!-- End Nav Section -->

  <div class="panel" style="background-color:#F5F5F5; margin-bottom:-2em">
    <div class="row">
      <!-- Content Part -->
      <div class="large-9 columns" style="padding-top:1rem;">
        <h1 align="left">LoCal Cluster</h1><br><br><br>
        <h3>Cluster Management</h3><hr>
          <ul> <li><a href="cluster_how_to.html">SystemImager How To</a></li></ul><br><br>
        <h3>Workloads</h3><hr>
          <ul>
            <li>Identify workloads: batch processing (Hadoop), stateless web services (web server/Cloudstone).</li>
            <li>Characterize idle times</li>
            <li>Identify "critical path" resources</li>
          </ul>
          <ul style="margin-left:2em">
            <li>Updates</li>
          </ul>
          <ul style="margin-left:4em">
            <li>11/18/09 - created resource utilization profiles of Cloudstone (web 2.0/interactive workload) on EC2 - main observation consistent low resource usage rather than periodic busy-idle oscillations</li>
            <li>11/25/09 - created an imaging script that images an ATOM server to look like the RAD Lab goldenimage. ATOM server imaged with ubuntu hardy 8.04 and installed with main Cloudstone/RAD Lab components</li>
          </ul>
          <ul style="margin-left:6em">
            <li>configured to connect to RAD Lab repositories</li>
            <li>chef - configuration of software (Chukwa, Nginx, HAProxy, Rails, MySQL, PostgreSQL)</li>
            <li>runit - service monitoring and management (starts, stops, restarts services and ensures that they automatically restart if they suddenly stop)</li>
            <li>nginix - webserver (used by Cloudstone)</li>
            <li>haproxy - opensource load-balancer (used by Cloudstone)</li>
            <li>Ruby on rails - application server (used by Cloudstone)</li>
            <li>MySQL - opensource database (used by Cloudstone)</li>
            <li>PostgreSQL - opensource database (used by Cloudstone)</li>
          </ul>
          <ul style="margin-left:4em">
            <li>12/2/09 - TODO</li>
          </ul>
          <ul style="margin-left:6em">
            <li>Image 6 new/blank ATOM servers for Prashanth to look like RAD Lab goldenimage and rack them into a cluster</li>
            <li>Create programmatic deployment library that can manipulate ATOM servers e.g. assign and modify cluster roles e.g. assigning a node to function as an application server or re-assigning a node to function as a database server</li>
          </ul> <br><br>

        <h3>Scheduler</h3><hr>
          <ul>
            <li>As few nodes awake as possible, subject to SLA constraints</li>
            <li>For the awake nodes, run as fast as possible</li>
            <li>Schedule jobs to run concurrently if their resource demands are orthogonal</li>
          </ul> <br><br>

        <h3>Hardware</h3><hr>
          <ul>
            <li>Identify power efficient hardware</li>
            <li>Characterize hardware power states and transition times</li>
          </ul><br><br>

        <h3>Software</h3><hr>
          <ul>
            <li>Optimize software (both time and energy efficiency gains)</li>
            <li>Configurations (lowest barrier)</li>
            <li>Scheduling (low barrier)</li>
            <li>Application architecture (more difficult)</li>
          </ul><br><br>

        <h3>Benchmarking and Analysis</h3><hr>
          <ul><li>Suspend resume times and costs</li></ul><br><br>

        <h3>Presentations</h3><hr>
          <ul>
            <li><a href="files/presentations/energy_efficient_cluster.ppt">Energy Efficient Web Server Cluster - Andrew, Sara, Laura (Jan 2010)</a></li>
            <li><a href="files/presentations/LoCalClusterPoster.pdf">Local Cluter Design Poster - Steve, Andrew, Laura, Sara, Yanpei (Oct 2009)</a></li>
            <li><a href="files/presentations/LoCalProfile.ppt">Energy Profiling Computers - Steve, Andrew (Oct 2009)</a></li>
            <li>Power-performance tradeoff - Yanpei (Oct 2009)</li>
          </ul><br><br>

        <h3>SIGCluster Meeting Notes 3 Feb 2010</h3><hr>
          <ul><li>create list of different models of cluster architecture and for each type list:</li></ul>
          <ul style="margin-left:2em;">
            <li>classes of applications encompassed</li>
            <li>implementation options for each kind of application (e.g. storage)</li>
            <li>power usage + potential savings</li>
            <li>real world examples</li>
            <li>other pros and cons</li>
          </ul><br><br>  

        <h3>Long-Term Agenda Outline 24 Feb 2010</h3><hr>
          <p>I. Cluster<p>
            <p style="margin-left:2em;">A. Getting initial cluster set up software-wise</p>
              <p style="margin-left:4em;">1. Determine what load balancer to use (PM)</p>
                <p style="margin-left:6em;">
                  a. Understand limits and tradeoffs of various load balancer options<br>
                  b. LVS, HAProxy, Pen and/or distributed versions like DNS RR or hardware load balancer<br>
                </p>
              <p style="margin-left:4em;">2. Set up scalable load generator</p>
                <p style="margin-left:6em;">
                  a. Evaluate options (see section C.)<br>
                  b. Distributed generator<br>
                  c. Rain (Rean), RUBIS, WikiBench<br>
                  d. Parallelize ‘non-parallel’ load generators like HTTPerf
                <p>
            <p style="margin-left:2em;">B. Building out the cluster hardware-wise</p>
              <p style="margin-left:4em;">1. Determine set of benchmarks to use</p>
                <p style="margin-left:6em;">a. SPECPower, one of our own that we’ll make</p>
              <p style="margin-left:4em;">2. Determine what metrics to measure</p>
                <p style="margin-left:6em;">a. gain, performance/watt, power states</p>
              <p style="margin-left:4em;">3. Decide what hardware mix to have i.e., resource balance</p>
                <p style="margin-left:6em;">
                  e.g., FAWN<br>
                  b. How to do this? Optimize for one particular app. Don’t try to solve the problem generically.
                </p>
              <p style="margin-left:4em;">The networking angle</p>
                <p style="margin-left:6em;">
                  a. How to handle persistent connections such as to backend storage<br>
                  b. How to scale up to a large number of nodes
                </p>
                  <p style="margin-left:8em;">
                    - problem: routers won’t broadcast packets to a subnet – needed for WOL<br>
                    - problem: ARP<br>
                    - problem: scalable WOL<br>
                    - e.g., see recent work on SEATTLE, PortLand, VL2
                  </p>
            <p style="margin-left:2em;">C. Choose applications / workloads / benchmarks</p>
              <p style="margin-left:4em;">1. Trace-driven</p>
                <p style="margin-left:6em;">
                  a. our own wiki app, markup to HTML conversion using Wikipedia traces<br>
                  b. EECS static pages
                </p>
              <p style="margin-left:4em;">2. Statistical model</p>
                <p style="margin-left:6em;">
                  a. Rean’s stuff<br>
                  b. CloudStone, RUBIS, etc. (see section A.2.)
                </p>
              <p style="margin-left:4em;">3. Figure out how I/O-intensive we want it to be</p>   
                <p style="margin-left:6em;">   
                  a. read heavy<br>
                  b. read and write heavy
                </p>
              <p style="margin-left:4em;">4. Actual apps</p> 
                <p style="margin-left:6em;"> 
                  a. Gil’s app BuildingBook thing<br>
                  b. Jorge’s IS4
                </p>
            <p style="margin-left:2em;">D. Deciding what the high-level software architecture will be</p> 
              <p style="margin-left:4em;">
                1. Decide if we want back-end database, cache servers, etc.<br>
                2. This is highly dependent on the workload and something to keep in mind when we select that (see part C.)
              </p>
          <p>II. Scheduler and simulator</p>
            <p style="margin-left:2em;">A. Microbenchmarks to determine the per-node performance / service-time / response-time model we use in the simulator</p>
              <p style="margin-left:4em;">1. How to generate these? Use synthetic traces generated from sine waves whose properties we know well.</p>
            <p style="margin-left:2em;">B. Scheduler policy</p>
              <p style="margin-left:4em;">1. Determine what metrics to use</p>
                <p style="margin-left:6em;">
                  a. violations<br>
                  b. amount of overprovision<br>
                  c. power-related metrics
                </p>
              <p style="margin-left:4em;">2. Incorporate microbenchmark data in a service-time model</p>
                <p style="margin-left:6em;">
                  a. how to handle violations (this will affect the results of our benchmarks and running the workloads so must decide before getting results)<br>
                  b. how violations affect performance in other ways
                </p>
              <p style="margin-left:4em;">3. Create the oracle / optimal scheduler policy with which to compare ourselves</p>
              <p style="margin-left:4em;">4. Incorporate variations in hardware</p>
              <p style="margin-left:4em;">5. Make it possible to select among different policies in the simulator (AK)</p>
              <p style="margin-left:4em;">6. Set up framework for running scripts and generating graphs (AK)</p>
          <p>III. Trace analysis</p>
            <p style="margin-left:2em;">A. Peak to average (take 99th percentile of peak), attributes of spikes (i.e., distribution of slopes, heights, etc.) (PM)</p> 
            <p style="margin-left:2em;">B. Request features (web services and Hadoop)</p> 
              <p style="margin-left:4em;">1. static versus dynamic</p> 
              <p style="margin-left:4em;">2. file sizes</p>
            <p style="margin-left:2em;">C. Find the interesting days / parts (e.g., with big spikes)</p><br><br>

        <h3>Paper Tasks 31 March 2010</h3><hr>
          <p>1. Real cluster</p>
            <ul style="margin-left:2em;"><li>* load gen (Andrew/Sara)</li></ul>
              <ul style="margin-left:4em;">
                <li>ab, proxify, wikibench (Sara)</li>
                <li>get HW</li>
              </ul>
          <p>2.Efficiency measurements (Laura)</p>
            <ul style="margin-left:2em;">
              <li>500 errors</li>
              <li>php backends, children</li>
            </ul>
          <p>3. Power measurements (Andrew)</p>
            <ul style="margin-left:2em;">email Raritan about aggregate power & time res</ul>
          <p>4. WikiTrace (Andrew/Sara)</p>
            <ul style="margin-left:2em;">
              <li>load DB</li>
              <li>consider partitioning</li>
              <li>MemCacheD</li>
              <li>DB machine</li>
            </ul>
          <p>5. Hardware</p>
            <ul style="margin-left:2em;">
              <li>NHM IPMI shutdown</li>
              <li>BeagleBoard low-power state</li>
              <li>fix Nehalem * email Jeff (Prashanth)</li>
            </ul><br><br>

        <h3>Paper Tasks 23 April 2010</h3><hr>
          <p>1. Setup master image on nhm</p>
          <p>2. Efficiency graphs (Lauren)</p>
            <ul style="margin-left:2em;">
              <li>Use busy loop (atom1:/var/www/busy.php)</li>
              <li>Re-run atom / nehalem graphs</li>
              <li>Run Z530</li>
            </ul>
          <p>3. Get Dents working (Lauren)</p>
          <p>4. Fill MediaWiki cache (Sara)</p>
            <ul style="margin-left:2em;">
              <li>Use most frequently accessed files</li>
              <li>Filter traces</li>
            </ul>
          <p>5. New simulation graphs (Prashanth)</p>
            <ul style="margin-left:2em;">
              <li>Heterogenous vs homogeneous vs slow re-configuration</li>
              <li>Overall cluster efficiency graph (us, oracle, static & on demand)</li>
              <li>Table: avg utilization, violations, energy (us, oracle, static & on demand)</li>
            </ul>
          <p>6. LVS (Andrew)</p>
            <ul style="margin-left:2em;"><li>move to nhm?</li></ul>  



     





      </div>  
      <!-- Side Nav -->
      <div class="large-3 columns" style="padding-top:1rem;">
        

        <div class = "custom-panel">

          <ul class="side-nav" align="center">
            <li align="left"><h2><b>Partners</b></h2></li>
            <li class="custom_divider"></li>
            <li><a href="http://aws.amazon.com"><img src="files/partners/amazon.gif" border="0" width="60" /></a></li>
            <li class="custom_divider"></li>
            <li><a href="http://www.energy.ca.gov"><img src="files/partners/CSEC.gif" border="0" width="60" /></a></li>
            <li class="custom_divider"></li>
            <li><a href="https://www.src.org/program/fcrp/"><img src="files/partners/FCRP.gif" border="0" width="60" /></a></li>
            <li class="custom_divider"></li>
            <li><a href="http://www.fujitsu.com/"><img src="files/partners/fujitsu.gif" border="0" width="60" /></a></li>
            <li class="custom_divider"></li>
            <li><a href="http://www.intel.com"><img src="files/partners/intel.gif" border="0" width="75" /></a></li>
            <li class="custom_divider"></li>
            <li><a href="http://www.keti.re.kr/e-keti/"><img src="files/partners/keti.gif" border="0" width="60" /></a></li>
            <li class="custom_divider"></li>
            <li><a href="http://www.lbl.gov"><img src="files/partners/LBL.gif" border="0" width="60" /></a></li>
            <li class="custom_divider"></li>
            <li><a href="http://www.musyc.org/"><img src="files/partners/MuSyC.gif" border="0" width="60" /></a></li>
            <li class="custom_divider"></li>
            <li><a href="http://www.nsf.gov"><img src="files/partners/NSF.gif" border="0" width="60" /></a></li>
            <li class="custom_divider"></li>
            <li><a href="http://www.nokia.com/"><img src="files/partners/nokia.gif" border="0" width="60" /></a></li>
            <li class="custom_divider"></li>
            <li><a href="http://www.samsung.com"><img src="files/partners/samsung.gif" border="0" width="60" /></a></li>
            <li class="custom_divider"></li>
            <li><a href="http://www.siemens.com"><img src="files/partners/siemens.gif" border="0" width="60" /></a></li>
            <li class="custom_divider"></li>
            <li><a href="http://www.doe.gov"><img src="files/partners/USDoE.gif" border="0" width="60" /></a></li>
           </ul>
           </div> 
        </div>

        <div class="large-12 columns">
          
        </div>
    </div>      
    <br><br><br><hr><br>







  </div>



<!-- bottom panel -->

      

  <div class="bott-panel">
    <div style="background-color:#F5F5F5;padding-top:1rem">
      <dic class="bott-panel-text">
        <div class="row">
          <div class="large-11 columns">
            <p style="color:#000000; font-size:13px">This material is based upon work supported by the National Science Foundation under grants CPS-1239552, and the NSF Graduate Research Fellowship Program. Any opinions, findings, and conclusions or recommendations expressed in this material are those of the author(s) and do not necessarily reflect the views of the National Science Foundation.
            </p>
          </div>

          <div class="large-1 columns">
            <img src="files/partners/NSF.gif" align="right">
          </div>

        </div>
      </div>
    </div>
  </div>

  <script src="js/vendor/jquery.js"></script>
  <script src="js/foundation.min.js"></script>
  <script>
    $(document).foundation();
  </script>
  
  </body>
</html>
